# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫ .htaccess

## üö® –ï—Å–ª–∏ —Å–∞–π—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Internal Server Error 500

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Apache
```bash
tail -20 /var/log/apache2/error.log
```

### –®–∞–≥ 2: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ .htaccess
```bash
mv .htaccess .htaccess.backup
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–π—Ç. –ï—Å–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª - –ø—Ä–æ–±–ª–µ–º–∞ –≤ .htaccess.

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
```bash
cp .htaccess-minimal .htaccess
```

### –®–∞–≥ 4: –ï—Å–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ .htaccess:
1. –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ —Å–∂–∞—Ç–∏–µ
2. –ü–æ—Ç–æ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ  
3. –ó–∞—Ç–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–º .htaccess:

1. **–£–±—Ä–∞–Ω–æ**: `ServerTokens Prod` - –Ω–µ–ª—å–∑—è –≤ .htaccess
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: `Order allow,deny` ‚Üí `Require all denied` (Apache 2.4)
3. **–£–±—Ä–∞–Ω–æ**: –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ `<Directory>` –¥–∏—Ä–µ–∫—Ç–∏–≤—ã
4. **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ü—Ä–æ–≤–µ—Ä–∫–∏ `<IfModule>` –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
5. **–£–ø—Ä–æ—â–µ–Ω–æ**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üõ† –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π Apache
apache2ctl -M | grep -E "(rewrite|deflate|expires|headers|mime)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ .htaccess
apache2ctl configtest

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Apache –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
systemctl reload apache2
```

## üìù –§–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

- `.htaccess` - –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
- `.htaccess-minimal` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /var/www/fastuser/data/www/aitracking.app

# –ï—Å–ª–∏ —Å–∞–π—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
mv .htaccess .htaccess.old
cp .htaccess-minimal .htaccess

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–π—Ç, –µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ä—Å–∏—é:
cp .htaccess-minimal .htaccess.backup
git pull origin main
``` 